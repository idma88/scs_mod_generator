function showColors(e){"default.sii"===(e=e.split("/"))[e.length-1]?$(".colors").show():$(".colors").hide()}function setColors(e,o,a){$("#color_palette").val(e),$("#color_hex").val(e),$("#color_rgb_r").val(o.r),$("#color_rgb_g").val(o.g),$("#color_rgb_b").val(o.b),$("#color_scs_r").val(parseFloat(a.r.toFixed(3))),$("#color_scs_g").val(parseFloat(a.g.toFixed(1))),$("#color_scs_b").val(parseFloat(a.b.toFixed(1)))}function rgbToHex(e,o,a){return"#"+componentToHex(e)+componentToHex(o)+componentToHex(a)}function componentToHex(e){var o=e.toString(16);return 1==o.length?"0"+o:o}function hexToRgb(e){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null}function rgbToScs(e,o,a){return{r:e/255,g:o/255,b:a/255}}function getCookie(e){var o=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return o?decodeURIComponent(o[1]):void 0}function setCookie(e,o,a){var t=(a=a||{}).expires;if("number"==typeof t&&t){var r=new Date;r.setTime(r.getTime()+1e3*t),t=a.expires=r}t&&t.toUTCString&&(a.expires=t.toUTCString());var l=e+"="+(o=encodeURIComponent(o));for(var i in a){l+="; "+i;var s=a[i];!0!==s&&(l+="="+s)}document.cookie=l}function getPreloaderHtml(e,o){return void 0===e&&(e=""),void 0===o&&(o="spinner-red-only"),'<div class="preloader-wrapper active '+e+'"><div class="spinner-layer '+o+'"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div>'}$(document).ready(function(){for(var e,o=document.querySelectorAll(".mdc-ripple:not([data-no-js])"),a=0;e=o[a];a++)mdc.ripple.MDCRipple.attachTo(e);var t=document.querySelector("#mdc-dialog-default");if(null!==t){var r=new mdc.dialog.MDCDialog(t);$(".modal-trigger").click(function(){r.show()})}var l,i=document.querySelectorAll(".mdc-text-field:not([data-demo-no-auto-js])");for(a=0;l=i[a];a++)mdc.textField.MDCTextField.attachTo(l);$("#toggle-dark").change(function(){this.checked?($("body").addClass("mdc-theme--dark"),setCookie("dark_theme","true",{expires:31536e3})):($("body").removeClass("mdc-theme--dark"),setCookie("dark_theme","true",{expires:-1}))}),$(".tooltipped").tooltip({position:"left",exitDelay:200}),$(".wheels select").select(),$(".tabs").tabs(),$(".collapsible").collapsible(),$(".show-skin").collapsible({onOpenStart:function(){var e=$(this)[0].$el;$.ajax({cache:!1,dataType:"json",type:"POST",data:{ajax:!0,target:e.data("game"),chassis:e.data("trailer"),lang:getCookie("lang")},beforeSend:function(){e.find(".collapsible-header").append(getPreloaderHtml("tiny"))},success:function(o){if("OK"===o.status){var a='<ul class="ac-list browser-default">';$.each(o.result,function(e,o){0!==e&&(a+="<li>"+o.name+"</li>")}),a+="</ul>",e.find(".collapsible-body").append(a)}},complete:function(){$(".preloader-wrapper").remove()}})},onCloseEnd:function(){$(this)[0].$el.find(".ac-list").remove()}}),$("#lang-btn").click(function(){setCookie("lang",$(this).data("lang"),{expires:31536e3})}),$("#select-chassis").uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,o,a){$("#accessory").hide().find(".ui.search").remove(),$("#paint").hide().find(".ui.search").remove(),$(".colors").hide(),$("#all_accessories, #all_paints").prop("checked",!1),""!==e&&("schw_overweight"!==e&&-1===e.indexOf("goldhofer")?$(".wheels.input-field").show():($(".wheels.input-field").hide(),$(".wheels.input-field select").val("")),$.ajax({cache:!1,dataType:"json",type:"POST",data:{ajax:!0,target:$("input[name=target]").val(),chassis:e,lang:getCookie("lang")},beforeSend:function(){$("#chassis").after(getPreloaderHtml("small"))},success:function(e){"OK"===e.status&&$.each(e.result,function(e,o){var a=$('<select class="browser-default ui search dropdown '+e+'" name="'+e+'"></select>');$.each(o.echo,function(e,o){var t='<option value="'+o.value+'"';o.selected&&(t+=" selected"),t+=">"+o.name+"</option>",a.append(t)}),$("#"+e).show().find("label.for-select").after(a),a.uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,o,a){"default.sii"===(e=e.split("/"))[e.length-1]?$(".colors").show():$(".colors").hide()}})})},complete:function(){$(".preloader-wrapper").remove()}}))}}),$("form").submit(function(){""===$("input[name=title]").val()&&$("input[name=title]").val($("select[name=chassis] option:selected").text().replace(/(\(.+|\s-\s.+)/,""))}),$("#all_accessories, #all_paints").change(function(){$(".colors").hide();var e=$(this).data("target");$.ajax({cache:!1,dataType:"json",type:"POST",data:{ajax:!0,target:$("input[name=target]").val(),all:$(this)[0].checked,select:e,chassis:$("select[name=chassis]").val(),lang:getCookie("lang")},beforeSend:function(){$("#"+$(this).data("target")+" h5").append(getPreloaderHtml("tiny"))},success:function(o){"OK"===o.status&&($.each(o.result,function(o,a){if(o===e){$("#"+o).find(".ui.search").remove();var t=$('<select class="browser-default ui search dropdown '+e+'" name="'+e+'"></select>');$.each(a.echo,function(e,o){var a='<option value="'+o.value+'"';o.selected&&(a+=" selected"),a+=">"+o.name+"</option>",t.append(a)}),$("#"+o).show().find("label.for-select").after(t),t.uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,o,a){showColors(e)}})}}),showColors($("#paint").find("select").val()))},complete:function(){$(".preloader-wrapper").remove()}})}),$(".colors input[type=color]").change(function(){var e=hexToRgb($(this).val()),o=rgbToScs(e.r,e.g,e.b);setColors($(this).val(),e,o)}),$("#color_hex").keyup(function(){var e=$(this).val();if(""!==e&&new RegExp("^#?[A-Fa-f0-9]{6}$").test(e)){var o=e.replace("#",""),a=hexToRgb(o);setColors("#"+o,a,rgbToScs(a.r,a.g,a.b))}}),$("#color_rgb_b, #color_rgb_g, #color_rgb_r").keyup(function(){var e=$(this).val().replace(/\D/g,"");if($(this).val(e),e=parseInt(e),!isNaN(e))if(e>255)$(this).val(255),$(this).trigger("keyup");else{var o={r:parseInt($("#color_rgb_r").val()),g:parseInt($("#color_rgb_g").val()),b:parseInt($("#color_rgb_b").val())};setColors(rgbToHex(o.r,o.g,o.b),o,rgbToScs(o.r,o.g,o.b))}}),$("#color_scs_b, #color_scs_g, #color_scs_r").keyup(function(){var e=$(this).val().replace(/,/g,".").replace(/\.+/g,".").replace(/[^\d|\.]/g,"");if($(this).val(e),e=parseFloat(e),!isNaN(e))if(e>1)$(this).val(1),$(this).trigger("keyup");else{var o=parseFloat($("#color_scs_r").val()),a=parseFloat($("#color_scs_g").val()),t=parseFloat($("#color_scs_b").val()),r={r:Math.round(255*o),g:Math.round(255*a),b:Math.round(255*t)},l=rgbToHex(r.r,r.g,r.b);$("#color_palette").val(l),$("#color_hex").val(l),$("#color_rgb_r").val(r.r),$("#color_rgb_g").val(r.g),$("#color_rgb_b").val(r.b)}}),$("#weight").keyup(function(){var e=$(this).val(),o=$(this).val();new RegExp("^d*$").test(e)||(o=e.replace(/\D/,""),$(this).val(o)),o.length>10&&$(this).val(o.substr(0,10))}),$("#image").change(function(){var e=window.URL||window.webkitURL;if(this.files[0].size>55e5)return alert($(this).data("size")),$(this).val(""),!1;var o,a,t=$(this).data("dimensions");(o=this.files[0])&&((a=new Image).src=e.createObjectURL(o),a.onload=function(){if(this.width>3e3||this.height>3e3)return alert(t),$("#image").val(""),$("#image-path").val(""),!1})})});