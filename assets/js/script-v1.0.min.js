function showColors(e){"default.sii"===(e=e.split("/"))[e.length-1]?$(".colors").show():$(".colors").hide()}function setColors(e,a,o){$("#color_palette").val(e),$("#color_hex").val(e),$("#color_rgb_r").val(a.r),$("#color_rgb_g").val(a.g),$("#color_rgb_b").val(a.b),$("#color_scs_r").val(parseFloat(o.r.toFixed(4))),$("#color_scs_g").val(parseFloat(o.g.toFixed(4))),$("#color_scs_b").val(parseFloat(o.b.toFixed(4)))}function rgbToHex(e,a,o){return"#"+componentToHex(e)+componentToHex(a)+componentToHex(o)}function componentToHex(e){var a=e.toString(16);return 1==a.length?"0"+a:a}function hexToRgb(e){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}function rgbToScs(e,a,o){return{r:Math.pow(e/255,2),g:Math.pow(a/255,2),b:Math.pow(o/255,2)}}function getCookie(e){var a=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return a?decodeURIComponent(a[1]):void 0}function setCookie(e,a,o){var t=(o=o||{}).expires;if("number"==typeof t&&t){var r=new Date;r.setTime(r.getTime()+1e3*t),t=o.expires=r}t&&t.toUTCString&&(o.expires=t.toUTCString());var l=e+"="+(a=encodeURIComponent(a));for(var i in o){l+="; "+i;var s=o[i];!0!==s&&(l+="="+s)}document.cookie=l}function getPreloaderHtml(e,a){return void 0===e&&(e=""),void 0===a&&(a="spinner-red-only"),'<div class="preloader-wrapper active '+e+'"><div class="spinner-layer '+a+'"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div>'}$(document).ready(function(){for(var e,a=document.querySelectorAll(".mdc-ripple:not([data-no-js])"),o=0;e=a[o];o++)mdc.ripple.MDCRipple.attachTo(e);var t=document.querySelector("#mdc-dialog-default");if(null!==t){var r=new mdc.dialog.MDCDialog(t);$(".modal-trigger").click(function(){r.show()})}var l,i=document.querySelectorAll(".mdc-text-field:not([data-demo-no-auto-js])");for(o=0;l=i[o];o++)mdc.textField.MDCTextField.attachTo(l);$("#toggle-dark").change(function(){this.checked?($("body").addClass("mdc-theme--dark"),setCookie("dark_theme","true",{expires:31536e3})):($("body").removeClass("mdc-theme--dark"),setCookie("dark_theme","true",{expires:-1}))}),$(".tooltipped").tooltip({position:"left",exitDelay:200}),$(".wheels select").select(),$(".tabs").tabs(),$(".collapsible").collapsible(),$(".show-skin").collapsible({onOpenStart:function(){var e=$(this)[0].$el;$.ajax({cache:!1,dataType:"json",type:"POST",data:{ajax:!0,target:e.data("game"),chassis:e.data("trailer"),lang:getCookie("lang")},beforeSend:function(){e.find(".collapsible-header").append(getPreloaderHtml("tiny"))},success:function(a){if("OK"===a.status){var o='<ul class="ac-list browser-default">';$.each(a.result,function(e,a){0!==e&&(o+="<li>"+a.name+"</li>")}),o+="</ul>",e.find(".collapsible-body").append(o)}},complete:function(){$(".preloader-wrapper").remove()}})},onCloseEnd:function(){$(this)[0].$el.find(".ac-list").remove()}}),$("#lang-btn").click(function(){setCookie("lang",$(this).data("lang"),{expires:31536e3})}),$("#select-chassis").uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,a,o){$("#accessory").hide().find(".ui.search").remove(),$("#paint").hide().find(".ui.search").remove(),$(".colors").hide(),$("#all_accessories, #all_paints").prop("checked",!1),""!==e&&("schw_overweight"!==e&&-1===e.indexOf("goldhofer")?$(".wheels.input-field").show():($(".wheels.input-field").hide(),$(".wheels.input-field select").val("")),$.ajax({cache:!1,dataType:"json",type:"POST",data:{ajax:!0,target:$("input[name=target]").val(),chassis:e,lang:getCookie("lang")},beforeSend:function(){$("#chassis").after(getPreloaderHtml("small"))},success:function(e){"OK"===e.status&&$.each(e.result,function(e,a){var o=$('<select class="browser-default ui search dropdown '+e+'" name="'+e+'"></select>');$.each(a.echo,function(e,a){var t='<option value="'+a.value+'"';a.selected&&(t+=" selected"),t+=">"+a.name+"</option>",o.append(t)}),$("#"+e).show().find("label.for-select").after(o),o.uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,a,o){"default.sii"===(e=e.split("/"))[e.length-1]?$(".colors").show():$(".colors").hide()}})})},complete:function(){$(".preloader-wrapper").remove()}}))}}),$("form").submit(function(){""===$("input[name=title]").val()&&$("input[name=title]").val($("select[name=chassis] option:selected").text().replace(/(\(.+|\s-\s.+)/,""))}),$("#all_accessories, #all_paints").change(function(){$(".colors").hide();var e=$(this).data("target");$.ajax({cache:!1,dataType:"json",type:"POST",data:{ajax:!0,target:$("input[name=target]").val(),all:$(this)[0].checked,select:e,chassis:$("select[name=chassis]").val(),lang:getCookie("lang")},beforeSend:function(){$("#"+$(this).data("target")+" h5").append(getPreloaderHtml("tiny"))},success:function(a){"OK"===a.status&&($.each(a.result,function(a,o){if(a===e){$("#"+a).find(".ui.search").remove();var t=$('<select class="browser-default ui search dropdown '+e+'" name="'+e+'"></select>');$.each(o.echo,function(e,a){var o='<option value="'+a.value+'"';a.selected&&(o+=" selected"),o+=">"+a.name+"</option>",t.append(o)}),$("#"+a).show().find("label.for-select").after(t),t.uidropdown({fullTextSearch:!0,duration:300,placeholder:!1,forceSelection:!1,onChange:function(e,a,o){showColors(e)}})}}),showColors($("#paint").find("select").val()))},complete:function(){$(".preloader-wrapper").remove()}})}),$(".colors input[type=color]").change(function(){var e=hexToRgb($(this).val()),a=rgbToScs(e.r,e.g,e.b);setColors($(this).val(),e,a)}),$("#color_hex").keyup(function(){var e=$(this).val();if(""!==e&&new RegExp("^#?[A-Fa-f0-9]{6}$").test(e)){var a=e.replace("#",""),o=hexToRgb(a);setColors("#"+a,o,rgbToScs(o.r,o.g,o.b))}}),$("#color_rgb_b, #color_rgb_g, #color_rgb_r").keyup(function(){var e=$(this).val().replace(/\D/g,"");if($(this).val(e),e=parseInt(e),!isNaN(e))if(e>255)$(this).val(255),$(this).trigger("keyup");else{var a={r:parseInt($("#color_rgb_r").val()),g:parseInt($("#color_rgb_g").val()),b:parseInt($("#color_rgb_b").val())};setColors(rgbToHex(a.r,a.g,a.b),a,rgbToScs(a.r,a.g,a.b))}}),$("#color_scs_b, #color_scs_g, #color_scs_r").keyup(function(){var e=$(this).val().replace(/,/g,".").replace(/\.+/g,".").replace(/[^\d|\.]/g,"");if($(this).val(e),e=parseFloat(e),!isNaN(e))if(e>1)$(this).val(1),$(this).trigger("keyup");else{var a={r:parseFloat($("#color_scs_r").val()),g:parseFloat($("#color_scs_g").val()),b:parseFloat($("#color_scs_b").val())},o={r:Math.round(255*Math.sqrt(a.r)),g:Math.round(255*Math.sqrt(a.g)),b:Math.round(255*Math.sqrt(a.b))},t=rgbToHex(o.r,o.g,o.b);$("#color_palette").val(t),$("#color_hex").val(t),$("#color_rgb_r").val(o.r),$("#color_rgb_g").val(o.g),$("#color_rgb_b").val(o.b)}}),$("#weight").keyup(function(){var e=$(this).val(),a=$(this).val();new RegExp("^d*$").test(e)||(a=e.replace(/\D/,""),$(this).val(a)),a.length>10&&$(this).val(a.substr(0,10))}),$("#image").change(function(){var e=window.URL||window.webkitURL;if(this.files[0].size>55e5)return alert($(this).data("size")),$(this).val(""),!1;var a,o,t=$(this).data("dimensions");(a=this.files[0])&&((o=new Image).src=e.createObjectURL(a),o.onload=function(){if(this.width>3e3||this.height>3e3)return alert(t),$("#image").val(""),$("#image-path").val(""),!1})})});